<!doctype html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="/css/template.css">
    <link rel="stylesheet" title="theme" href="/css/start_theme.css">
    <title>üßÆ [SmartCalc]</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://kit.fontawesome.com/ba7c82e292.js" crossorigin="anonymous"></script>
    <!-- <script src="js/script.js"></script> -->
    <script src="eel.js"></script>
    <script src="js/stopHAX.js"></script>
    <link rel="icon" type="image/png" href="/SmartCalc.png">
</head>
<body>
    <!--
        –Ø –Ω–∞—á–∏–Ω–∞—é—â–∏–π –≤ –≤—ë—Ä—Å—Ç–∫–µ –∏ –ø–æ–Ω–∏–º–∞—é, —á—Ç–æ –∑–¥–µ—Å—å –º–Ω–æ–≥–æ –æ—à–∏–±–æ–∫, –Ω–æ —è —É—á—É—Å—å
        –∏ —É–∑–Ω–∞—é –º–Ω–æ–≥–æ –Ω–æ–≤—ã—Ö —Å–ø–æ—Å–æ–±–æ–≤, –∫–∞–∫ –ª–µ–≥–∫–æ —Å–¥–µ–ª–∞—Ç—å —Ç–æ –∏–ª–∏ –∏–Ω–æ–µ, –ø–æ—ç—Ç–æ–º—É, –Ω–∞–¥–µ—é—Å—å –Ω–∞
        –Ω–µ –æ—á–µ–Ω—å —Å–µ—Ä—å—ë–∑–Ω—É—é –∫—Ä–∏—Ç–∏–∫—É –∫–æ–¥–∞.
        ps. –ê–≤—Ç–æ—Ä–æ–º circle_theme —è –Ω–µ —è–≤–ª—è—é—Å—å, —ç—Ç–∏ —Å—Ç–∏–ª–∏ –±—ã–ª–∏ –Ω–∞–π–¥–µ–Ω—ã –≤ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç–µ –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –¥–æ—Å—Ç—É–ø–µ.
    -->

    <div class="title">
    <p>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</p>
    </div>

    <div class="main">
        
        <input id="input_t" autocomplete="off" required="" type="text" onblur="this.focus()" autofocus>
        <div id="announce"></div> <!--–û–±—ä—è–≤–ª–µ–Ω–∏–µ –æ —Å–º–µ–Ω–µ —Ç–µ–º—ã-->

        <div class="buttons">
            <p style="margin-top: 30%;">
                <button class="button" id="clear"><b>C</b></button>
                <button class="button" id="undo"><b>‚å´</b></button>
                <button class="button" id="multiply"><b>*</b></button>
                <button class="button" id="divide"><b>/</b></button>
            </p>      		 		      		 	
            <p>
                <button class="button" id="n_7"><b>7</b></button>
                <button class="button" id="n_8"><b>8</b></button>
                <button class="button" id="n_9"><b>9</b></button>
                <button class="button" id="minus"><b>-</b></button>
            </p>
            <p>
                <button class="button" id="n_4"><b>4</b></button>
                <button class="button" id="n_5"><b>5</b></button>
                <button class="button" id="n_6"><b>6</b></button>
                <button class="button" id="plus"><b>+</b></button>
            </p>
              <p>
                <button class="button" id="n_1"><b>1</b></button>
                <button class="button" id="n_2"><b>2</b></button>
                <button class="button" id="n_3"><b>3</b></button>
                <button class="button" id="equals"><b>=</b></button>
            </p>
            <p>
                <button class="button" id="n_0"><b>0</b></button>
                <button class="button" id="dot"><b>.</b></button>
                <button class="button" id="sqrt"><b>‚àö</b></button>
                <button class="button" id="sqr"><b>x¬≤</b></button>
            </p> 
            <hr>
            <p> <!--–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏-->
                <button class="button" id="cos"><b>cos</b></button>
                <button class="button" id="sin"><b>sin</b></button>
                <button class="button" id="tan"><b>tan</b></button>
                <button class="button" id="ln"><b>ln</b></button>
            </p> 
            <p>
                <button class="button" id="open_bracket"><b>(</b></button>
                <button class="button" id="rad_deg"><b>r<b style="font-size: 15px;"> / </b>¬∞</b></button>
                <button class="button" id="PI"><b>œÄ</b></button>
                <button class="button" id="E"><b>e</b></button>
                <button class="button" id="x-in-y">x<sup>y</sup></button>
                <button class="button" id="closed_bracket"><b>)</b></button>
            </p> 
        </div>
        <footer>
            <li id="raddeg" title="–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ç–µ–∫—É—â–∏–π —Ä–µ–∂–∏–º –µ–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è —É–≥–ª–∞">–°–µ–π—á–∞—Å –≤–∫–ª—é—á–µ–Ω —Ä–µ–∂–∏–º —Ä–∞–¥–∏–∞–Ω</li>
            <!--<li id="settings-save" title="–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–µ–∫—É—â—É—é —Ç–µ–º—É"><i id="saveTheme" class="fa-solid fa-floppy-disk"></i></li>-->
            <li id="settings-p-1" title="–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ">
                <i id="toHome" class="fa-sharp fa-solid fa-backward" onclick='window.location.replace("Home.html"); backToHome();'></i></li>
            <li id="settings-p" title="–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º"><i id="changeTheme" class="fa-solid fa-screwdriver-wrench"></i></li>
        </footer>
    </div>

</body>
<style>::-webkit-scrollbar {width: 0;}</style>
<script>

window.addEventListener("keydown", function(event) {
    if (event.keyCode == 13) {
        equals_f();
    }
});

async function backToHome() {
    await eel.change_config("Home.html")();
}


window.moveTo(screen.width/2-210, screen.height/2-360); // –í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞ –ø–æ —Ü–µ–Ω—Ç—Ä—É
resizeTo(435,720);
// –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
let input_t = document.getElementById("input_t"); // –ü–æ–ª—É—á–∞–µ–º –ø–æ–ª–µ –≤–≤–æ–¥–∞
let is_rad_active = true; // –í–∫–ª—é—á–µ–Ω—ã –ª–∏ —Ä–∞–¥–∏–∞–Ω—ã
let previous_symbol = '+'; // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Å–∏–º–≤–æ–ª–∞
let trig_brackets_open = false; // –†–∞–Ω–µ–µ —Å–∫–æ–±–∫–∞ –±—ã–ª–∞ –æ—Ç–∫—Ä—ã—Ç–∞?
let current_theme = 0; // –¢–µ–∫—â–∞—è —Ç–µ–º–∞
let themes_array = [ // –°–ø–∏—Å–æ–∫ —Ç–µ–º –∏ –æ–ø–∏—Å–∞–Ω–∏–µ –∫ –Ω–∏–º
                    "start_theme_b", "–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ç–µ–º–∞ —Å –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–º –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ–º",
                    "white_theme", "–°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞",
                    "white_theme_b", "–°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞ —Å –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–º –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ–º",
                    "black_theme", "–¢—ë–º–Ω–∞—è —Ç–µ–º–∞",
                    "black_theme_b", "–¢—ë–º–Ω–∞—è —Ç–µ–º–∞ —Å –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–º –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ–º",
                    "gradient_theme", "–ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω–∞—è —Ç–µ–º–∞ —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π",
                    "gradient_theme_b", "–ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω–∞—è —Ç–µ–º–∞ —Å –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–º –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ–º",
                    "circle_theme", "–¢–µ–º–∞ —Å –ø–ª–∞–≤–∞—é—â–∏–º–∏ –∫—Ä—É–∂–∫–∞–º–∏",
                    "circle_theme_b", "–ö–≤–∞–¥—Ä–∞—Ç–Ω–∞—è —Ç–µ–º–∞ —Å –∫—Ä—É–∂–∫–∞–º–∏",
                    "start_theme", "–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ç–µ–º–∞"
                    ];

function isitmathsymbol(sym) { // –ü—Ä–æ–≤–µ—Ä–∫–∞, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –≤–≤–æ–¥–∏–º—ã–π —Å–∏–º–≤–æ–ª —Å–∏–º–≤–æ–ª–æ–º –º–∞—Ç. –æ–ø–µ—Ä–∞—Ü–∏–∏.
    if (sym == '+' ||
        sym == '-' ||
        sym == '*' ||
        sym == '/' ) return true; else return false;
}
function clear_all() { // –û—á–∏—Å—Ç–∫–∞ –ø–æ–ª—è –≤–≤–æ–¥–∞, —Å–±—Ä–æ—Å –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
    document.getElementById("input_t").value = "";
} 
// üîú –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏–µ –∫–æ–Ω—Ü–∞ –≤–≤–æ–¥–∏–º–æ–π —Å—Ç—Ä–æ–∫–∏. –ù—É–∂–µ–Ω –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º–µ
// ‚Üì –û—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —Ç–µ–∫—É—â–∞—è —Å—Ç—Ä–æ–∫–∞ –∏–∑ –ø–æ–ª—è –≤–≤–æ–¥–∞ –∏ —Ä–µ–∂–∏–º –≥—Ä–∞–¥—É—Å–æ–≤
async function equals_f() { // –í—ã–∑—ã–≤–∞–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –Ω–∞–∂–∏–º–∞–µ–º –Ω–∞ —Ä–∞–≤–Ω–æ –∏–ª–∏ Enter
    if (trig_brackets_open == true) { // –ó–∞–∫—Ä—ã—Ç—å —Å–∫–æ–±–∫—É, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–±—ã–ª
    input_t.value = await eel.equals(input_t.value+')üîú', is_rad_active)(); // –ó–∞–ø—É—Å–∫–∞–µ–º –æ—Å–Ω–æ–≤–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é 
                                                                             // –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞, –∫–æ—Ç–æ—Ä–∞—è –Ω–∞–ø–∏—Å–∞–Ω–∞ –Ω–∞ Python
    trig_brackets_open = false;
    } else input_t.value = await eel.equals(input_t.value+'üîú', is_rad_active)(); 
}

function change_rag_rad() { // –ò–∑–º–µ–Ω–∏—Ç—å —Ä–µ–∂–∏–º –∏–∑–º–µ—Ä–µ–Ω–∏—è —É–≥–ª–æ–≤
    if (is_rad_active == false) {
        is_rad_active = true;
        document.getElementById("raddeg").innerHTML = "–°–µ–π—á–∞—Å –≤–∫–ª—é—á–µ–Ω —Ä–µ–∂–∏–º —Ä–∞–¥–∏–∞–Ω";
    }
    else {
        is_rad_active = false;
        document.getElementById("raddeg").innerHTML = "–°–µ–π—á–∞—Å –≤–∫–ª—é—á–µ–Ω —Ä–µ–∂–∏–º –≥—Ä–∞–¥—É—Å–æ–≤";
    }
}

function del_sym() { // –£–¥–∞–ª–∏—Ç—å 1 —Å–∏–º–≤–æ–ª –∏–∑ –ø–æ–ª—è –≤–≤–æ–¥–∞
    let val = input_t.value;
    val = val.substring(0, val.length-1)
    input_t.value = val;
}

function add_sym(sym) { // –î–æ–±–∞–≤–∏—Ç—å —Å–∏–º–≤–æ–ª –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞
    previous_symbol = input_t.value[input_t.value.length - 1]; // –ü—Ä–µ–¥—ã–¥—É—â–∏–π —Å–∏–º–≤–æ–ª —Å—Ç—Ä–æ–∫–∏
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ 2—Ö –ø–æ–¥—Ä—è–¥ –∏–¥—É—â–∏—Ö –º–∞—Ç. —Å–∏–º–≤–æ–ª–æ–≤
    if (isitmathsymbol(sym) && (isitmathsymbol(previous_symbol) || sym=='¬≤')) return null;
    if (!isitmathsymbol(previous_symbol) && (sym == 'cos' || sym == 'sin' || sym == 'tan')) return null;
    input_t.value = input_t.value + sym;
}


{ // –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏–π –∫–Ω–æ–ø–æ–∫
jQuery('#undo').on('click', function () {del_sym();});
jQuery('#clear').on('click', function () {clear_all();});
jQuery('#n_1').on('click', function() {add_sym('1');});
jQuery('#n_2').on('click', function() {add_sym('2');});
jQuery('#n_3').on('click', function() {add_sym('3');});
jQuery('#n_4').on('click', function() {add_sym('4');});
jQuery('#n_5').on('click', function() {add_sym('5');});
jQuery('#n_6').on('click', function() {add_sym('6');});
jQuery('#n_7').on('click', function() {add_sym('7');});
jQuery('#n_8').on('click', function() {add_sym('8');});
jQuery('#n_9').on('click', function() {add_sym('9');});
jQuery('#n_0').on('click', function() {add_sym('0');});
jQuery('#plus').on('click', function() {add_sym('+');});
jQuery('#divide').on('click', function() {add_sym('/');});
jQuery('#multiply').on('click', function() {add_sym('*');});
jQuery('#minus').on('click', function() {add_sym('-');});
jQuery('#sqrt').on('click', function() {add_sym('‚àö');});
jQuery('#sqr').on('click', function() {add_sym('¬≤');});
jQuery('#dot').on('click', function() {add_sym('.');});

jQuery('#cos').on('click', function() {add_sym('cos('); trig_brackets_open = true;});
jQuery('#sin').on('click', function() {add_sym('sin('); trig_brackets_open = true;});
jQuery('#tan').on('click', function() {add_sym('tan('); trig_brackets_open = true;});
jQuery('#ln').on('click', function() {add_sym('log('); trig_brackets_open = true;});
jQuery('#PI').on('click', function() {add_sym('œÄ');});
jQuery('#E').on('click', function() {add_sym('e');});
jQuery('#x-in-y').on('click', function() {add_sym('**');});
jQuery('#open_bracket').on('click', function() {add_sym('(');});
jQuery('#closed_bracket').on('click', function() {add_sym(')'); trig_brackets_open = false;});

jQuery('#rad_deg').on('click', function() {change_rag_rad();});

jQuery('#equals').on('click', function() {equals_f();});
}

function getNextTheme() { // –ü–æ–ª—É—á–∞–µ–º —Å–ª–µ–¥—É—é—â—É—é —Ç–µ–º—É
    current_theme += 2;
    if (current_theme >= themes_array.length+1) {
        current_theme = 2;
    }
    return [themes_array[current_theme-2], themes_array[current_theme-1]];
    
}

function applyTheme(theme) { // –ü—Ä–∏–º–µ–Ω—è–µ–º —Ç–µ–º—É
    document.querySelector('[title="theme"]').setAttribute('href', `css/${theme}.css`); 
}

jQuery('#changeTheme').on('click', function() {
    var theme = getNextTheme(); // –ü–µ—Ä–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ - –∫–ª—é—á —Å—Ü–µ–Ω—ã, –≤—Ç–æ—Ä–æ–µ - –æ–ø–∏—Å–∞–Ω–∏–µ
    applyTheme(theme[0]);
    localStorage.setItem('theme', theme[0]); // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Ç–µ–º—ã –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –±—Ä–∞—É–∑–µ—Ä–∞,
                                             // —á—Ç–æ–±—ã –ø—Ä–∏ —Å–ª–µ–¥. –∑–∞–ø—É—Å–∫–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–ª–∞—Å—å –∏–º–µ–Ω–Ω–æ –æ–Ω–∞
    let announcement = document.getElementById("announce");
    announcement.innerHTML = theme[1];

    announcement.animate( // –ü–ª–∞–≤–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ç–µ–º—ã
        [
            {opacity: '0%' },
            {opacity: '100%' },
            {opacity: '100%' },
            {opacity: '0%' }
        ], {
            duration: 3000 
        }
    );

});

// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π —Ç–µ–º—ã
let activeTheme = localStorage.getItem('theme');
console.log(activeTheme);


if (activeTheme === null) {
    applyTheme("start_theme");
} else {
    applyTheme(activeTheme);
}


</script>
</html>